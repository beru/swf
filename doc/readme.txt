
swf crumb

・このソフトについて
拡張子がswdのデバッグ情報ファイルを利用して、ActionScriptのtraceにファイル名と行番号を付加した改変を行ったswfを出力するソフトです。

・使い方
コマンドラインに2つのファイル名を渡して実行して下さい。

> 入力swfファイル名 出力swfファイル名

・制限、バグ

ActionScript2までの対応です。まだActionScript3には対応していません。

入力swfファイルに対応するswdファイルが同じフォルダに無いと正しく動作しません。
パブリッシュ設定のデバッグを許可にチェックを入れるとデバッグ情報ファイルのswdがswfと同じ場所に作られます。
この際swf中のActionScriptのバイトコードでDefineFunction2は使われずにDefineFunctionのみが使われるようです。（Flash CS6で確認）

swdファイルが正しく作られるようにする為に、メニューの [制御] => [パブリッシュキャッシュをクリア] を実行した後にパブリッシュを行って下さい。（Adobe CS6で確認）

この改変ツールではActionConstantPoolレコードを使わないでTrace出力している為、改変して出力するswfのファイルサイズが大きく増えやすいです。

・ソースコードについて
https://github.com/beru/swf

・変更履歴

2013年1月2日 最初のバージョン
2013年1月3日 入力のswfがzlib圧縮されていたら出力するswfもzlib圧縮するように処理を追加
2013年1月10日 swf中のコード追加に伴う内部の値の変更が不十分だった問題を修正
2013年1月11日 バイトコードのオフセット計算処理のバグを修正

